import {
  ArgsTable,
  Story,
  Canvas,
  Meta,
} from '@storybook/addon-docs';
import { useState } from 'react';
import { MenuItem, Dropdown } from '..';

<Meta
  title="Input/Dropdown"
  component={Dropdown}
  argTypes={{
    helperText: {
      control: 'text',
      description: 'Text to display under dropdown',
    },
    labelText: {
      control: 'text',
      description: 'Label text above dropdown',
    },
    error: {
      control: 'boolean',
      description: 'True/false value for displaying an error',
    },
    errorMessage: {
      control: 'text',
      description: 'Error message, only shows if "error" === true',
    },
    autoWidth: {
      control: 'boolean',
      description: 'If set to true, the width of the dropown will be determined by its contents. Otherwise it will default to value set in theme.',
    },
    selectValue: {
      control: 'text',
      description: 'Base text if nothing is selected',
    },
    multiple: {
      control: 'boolean',
      description: 'Option to select multiple dropdown items',
    },
  }}
/>

export const Template = (args) => {
  const [item, setItem] = useState([]);
  const handleChange = (event) => {
    const {
      target: { value },
    } = event;
    setItem(
      // On autofill we get a stringified value.
      typeof value === 'string' ? value.split(',') : value,
    );
  };
  return (
    <Dropdown
      value={item}
      onChange={handleChange}
      {...args}
    >
      <MenuItem id="item1" key="1" value="Item 1">Item 1</MenuItem>
      <MenuItem id="item2" key="2" value="Item 2">Item 2</MenuItem>
      <MenuItem id="item3" key="3" value="Item 3">Item 3</MenuItem>
    </Dropdown>
  );
};

# Dropdown
Dropdown presents a list of options for a user to select from, sometimes several.

## Props
<ArgsTable story="." />

## Handling Events/Example
It's up to the developer to handle the `onChange` event and to keep track of the item state.
You can use the example below for an idea how to manage that.
```
import React, { useState } from 'react';
import { Dropdown, MenuItem } from '@wme/components';

export const MyDropdown = (props) => {
  const [item, setItem] = useState([]);

  const handleChange = (event) => {
    const {
      target: { value },
    } = event;
    setItem(
      // On autofill we get a stringified value.
      typeof value === 'string' ? value.split(',') : value,
    );
  };

  return (
    <Dropdown
      value={item}
      selectValue="Select"
      onChange={handleChange}
      error={props.error}
      errorMessage={props.errorMessage}
    >
      <MenuItem id="item1" key="1" value="Item 1">Item 1</MenuItem>
      <MenuItem id="item2" key="2" value="Item 2">Item 2</MenuItem>
      <MenuItem id="item3" key="3" value="Item 3">Item 3</MenuItem>
    </Dropdown>
  );
};

export default MyDropdown;
```
## Canvas
<Canvas>
  <Story
    name="Base"
    args={{
      selectValue: 'Select',
      multiple: true,
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>