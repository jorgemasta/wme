import {
  ArgsTable,
  Story,
  Canvas,
  Meta,
} from '@storybook/addon-docs';
import { useState } from 'react';
import { FileUpload } from '..';
import fileUploadImage from '../../stories/images/file-upload.png';

<Meta
  title="Input/FileUpload"
  component={FileUpload}
  argTypes={{
    label: {
      control: 'text',
      defaultValue: 'Upload Your Sigil',
      description: 'Label that goes above File Upload',
    },
    subText: {
      control: 'text',
      description: 'Subscript under button',
    },
    helperText: {
      control: 'text',
      defaultValue: 'The Doors of Durin, also known as the West-gate, the West-door of Moria, or Elven Door, were built into the Walls of Moria in the dark cliffs.',
      description: 'Text that goes below File Upload',
    },
    buttonText: {
      control: 'text',
      defaultValue: 'Add File',
      description: 'Text inside of button',
    },
    error: {
      control: 'boolean',
      description: 'True/false value for displaying an error',
    },
    errorMessage: {
      control: 'text',
      description: 'Error message, only shows if "error" === true',
    },
    handleDeleteFile: {
      control: false,
      description: 'Fires when a file is deleted',
    },
    handleFileActions: {
      control: false,
      description: 'Fires when a file is selected',
    },
    handleUploadedFile: {
      control: false,
      description: 'Fires when file is uploaded',
    },
    showSelectedFileActions: {
      control: false,
      description: 'Boolean to either show selected file or button',
    },
    nevermind: {
      control: 'text',
      description: 'Text that displays when Delete is clicked. Defaults to "Nevermind"',
    },
    file: {
      control: false,
      description: 'File selected',
    },
    image: {
      control: false,
      description: 'Image selected',
    },
    deleteButtonText: {
      control: 'text',
      description: 'Delete button text, defaults to "Delete"',
    }
  }}
/>

export const Template = (args) => {
  const [showSelectedFileActions, setShowSelectedFileActions] = useState(false);
  const [selectedFile, setSelectedFile] = useState(true);
  const handleFileActions = () => {
    setShowSelectedFileActions(!showSelectedFileActions);
  };
  const handleDeleteFile = () => {
    handleFileActions();
    setSelectedFile(false);
  };
  return (
    <FileUpload
      handleFileActions={handleFileActions}
      showSelectedFileActions={showSelectedFileActions}
      handleDeleteFile={handleDeleteFile}
      selectedFile={selectedFile}
      {...args}
    />
  );
};

# File Upload
Users are able to upload various file types.

## Props
<ArgsTable story="." />

## Handling Events/Example
The developer has control over how to handle the actual
upload, as well as how to handle deleting/changing the selected
file.
```
import React, { useState } from 'react';
import { FileUpload } from '@moderntribe/wme';

export const MyFileUpload = (args) => {
  const [showSelectedFileActions, setShowSelectedFileActions] = useState(false);
  const [selectedFile, setSelectedFile] = useState(true);

  const handleFileActions = () => {
    setShowSelectedFileActions(!showSelectedFileActions);
  };

  const handleDeleteFile = () => {
    handleFileActions();
    setSelectedFile(false);
  };

  const handleUploadedFile = (event) => {
    console.log(`${selectedFile} was uploaded`);
  };

  return (
    <FileUpload
      handleFileActions={handleFileActions}
      showSelectedFileActions={showSelectedFileActions}
      handleDeleteFile={handleDeleteFile}
      selectedFile={selectedFile}
      handleUploadedFile={handleUploadedFile}
      {...args}
    />
  );
};

export default MyFileUpload;
```

## Canvas
<Canvas>
  <Story
    name="FileUploadBase"
    args={{
      subText: '20MB max',
      selectedFile: false,
    }}
  >
    {Template.bind({})}
  </Story>
  <Story
    name="ImageUploaded"
    args={{
      image: fileUploadImage,
    }}
  >
    {Template.bind({})}
  </Story>
  <Story
    name="FileUploaded"
    args={{
      file: 'your-file.doc',
    }}
  >
    {Template.bind({})}
  </Story>
  <Story
    name="UploadError"
    args={{
      error: true,
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>
